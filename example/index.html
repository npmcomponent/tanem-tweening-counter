<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tweening Counter Demo</title>
  <style type="text/css">
  body {
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  }

  .tweening-counter {
    font-size: 120px;
    height: 200px;
    left: 50%;
    line-height: 200px;
    margin-left: -100px;
    margin-top: -100px;
    position: absolute;
    text-align: center;
    top: 50%;
    width: 200px;
  }
  </style>
</head>
<body>
  <div class="tweening-counter"></div>
  <script src="../src/tweening-counter.js"></script>
  <script>
  (function(){

    // http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
    window.requestAnimFrame = (function(){
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        function(callback){
          window.setTimeout(callback, 1000 / 60);
        };
    })();

    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random#Example:_Using_Math.random
    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    var tweeningCounter = new TweeningCounter({
      el: document.querySelector('.tweening-counter'),
      durationVal: 3
    });

    // Runs the tweening counter towards a random int between 0 and 50,
    // with a delay of between 0.5s and 2s between each run.
    function run(tweeningCounter) {
      var start = null;
      var delay = getRandomInt(500, 2000);
      tweeningCounter
        .finish(getRandomInt(0, 50))
        .run(function loop() {
          start = start || Date.now();
          var now = Date.now();
          if (now - start >= delay) {
            start = null;
            return run(tweeningCounter);
          }  
          requestAnimFrame(loop);
        });
    }

    run(tweeningCounter)

  }());
  </script>
</body>
</html>
