<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tweening Counter Demo</title>
  <style type="text/css">
  body {
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  }

  .tweening-counter {
    font-size: 120px;
    height: 200px;
    left: 50%;
    line-height: 200px;
    margin-left: -100px;
    margin-top: -100px;
    position: absolute;
    text-align: center;
    top: 50%;
    width: 200px;
  }
  </style>
</head>
<body>
  <div class="tweening-counter"></div>
  <script src="../build/build.js"></script>
  <script>
  (function(){
    
    var bind = require('bind');
    var raf = require('raf');
    var random = require('random');
    var TweeningCounter = require('tweening-counter');

    var start, delay;

    var tweeningCounter = new TweeningCounter(document.querySelector('.tweening-counter'))
      .duration(3000)
      .onEnd(loop);

    function loop() {
      start = start || Date.now();
      var now = Date.now();
      if (now - start >= delay) {
        start = null;
        return run(this);
      }  
      raf(bind(this, loop));
    }

    // Runs the tweening counter towards a random int between 0 and 50,
    // with a delay of between 0.5s and 2s between each run.
    function run(tweeningCounter) {
      start = null;
      delay = random(500, 2000, true);
      tweeningCounter
        .to(random(0, 50, true))
        .start();
    }

    run(tweeningCounter);

  }());
  </script>
</body>
</html>